const group_00_06 = ["Dù đã khuya, tôi vẫn ở đây để hỗ trợ thông tin cho bạn.",
    "Bạn vẫn còn ở đó à, nếu có bất kỳ câu hỏi nào đừng ngại hãy hỏi tôi nhé!",
    "Tôi biết là đã khá muộn, nhưng nếu bạn cần hỗ trợ cứ liên hệ tôi nhé!",
    "Bạn thường xuyên làm việc vào buổi tối phải không? Tôi cũng thích không gian yên tĩnh về đêm.",
    "Oh, bạn còn thức và tìm kiếm thông tin à? Tôi có thể giúp đỡ bạn thông tin nhanh chóng hơn. Hãy hỏi tôi nhé",
    "Xin chào bạn đồng hành đêm khuya, tôi có thể hỗ trợ gì cho bạn không?",
    "Có vẻ như bạn đặc biệt quan tâm đến chương trình học dù đang đêm muộn? Vậy cùng tìm hiểu với tôi nhé",
    "Bạn có thích đón bình minh sớm không? dù thời gian nào, tôi vẫn ở đây sẵn sàng hỗ trợ bạn.",
    "Trời về đêm có thể lạnh hơn, bạn giữ gìn sức khỏe nhé, cần hỗ trợ hãy hỏi tôi!",
    "Bạn có sợ deadline không? Tôi có một vài lớp kỹ năng nâng cao hiệu suất làm việc hiệu quả, bạn có muốn tìm hiểu không?",
    "Lấy một cốc nước ấm và cùng tôi tâm sự nào!",
    "Chào bạn, dù giờ này đã khuya, nhưng tôi luôn ở đây và sẵn sàng giúp đỡ mọi vấn đề của bạn",
    "Trời đêm thật yên tĩnh và mát mẻ đúng không bạn, tôi thích không khí này lắm!",
    'Có vẻ như bạn là một "cú đêm" nhỉ? Bạn cần tôi hỗ trợ gì nào?'];

const group_06_10 = ["Chào buổi sáng! Bạn đã có kế hoạch đặc biệt gì cho ngày hôm nay chưa?",
    "Thời tiết hôm nay thật tuyệt, bạn có ra ngoài trong những ngày như thế này không?",
    "Xin chào, bạn đã bắt đầu ngày hôm nay như thế nào? Tôi thì thích uống một ly cafe với nhiều kem muối.",
    "Rất vui được gặp bạn vào sáng nay, bạn có câu hỏi nào dành cho tôi không?",
    "Hãy bắt đầu ngày mới với thật nhiều năng lượng, tôi có một bí quyết muốn kể cho bạn nghe nè!",
    "Lựa chọn khóa học phù hợp chưa bao giờ dễ dàng, hãy để tôi giúp bạn nhé!",
    "Xin chào, sáng nay bạn cảm thấy thế nào? Hy vọng hôm nay sẽ là một ngày tuyệt vời với bạn.",
    "Xin chào, hôm nay bạn đã ăn sáng chưa? Bữa sáng ngon miệng sẽ tiếp thêm sức mạnh cho bạn trong một ngày dài năng động.",
    "Chúc bạn buổi sáng tốt lành, hôm nay bạn cảm thấy như thế nào? Cùng trò chuyện với tôi nhé...",
    "Xin chào buổi sáng, mình là trợ lí AI, rất vui được hỗ trợ bạn",
    "Chào buổi sáng! Bạn đang lên kế hoạch học tập mới à, chia sẻ với tôi nhé",
    "Ngày mới vui vẻ, hình như bạn đang có thắc mắc về (môn học) phải không? Để tôi hỗ trợ bạn thông tin nhé",
    "Chào buổi sáng! Tôi đã sẵn sàng hỗ trợ bạn. Có điều gì bạn muốn thảo luận hoặc tìm hiểu?",
    "Xin chào! Hôm nay tôi có nhiều thông tin ưu đãi mới cho khóa học? Bạn có muốn cùng tôi tìm hiểu không?",
    "Buổi sáng tốt lành! Tôi sẵn sàng để trò chuyện hoặc trả lời bạn với bất cứ câu hỏi nào."];

const group_10_12 = ["Xin chào, hôm nay bạn đã bắt đầu một ngày làm việc nhiều năng lượng phải không?",
    "Xin chào, bạn đã có kế hoạch gì cho bữa trưa chưa?",
    "Tôi vừa đọc một bài viết thú vị về Phân tích dữ liệu bạn có quan tâm đến chủ đề này không?",
    "Hôm nay có vẻ là một ngày bận rộn, bạn có cần tôi hỗ trợ thông tin gì không ạ?",
    "Gần đây chúng tôi có một số cập nhật thú vị, bạn có muốn tôi chia sẻ không?",
    "Xin chào buổi sáng, mình là trợ lí AI, rất vui được hỗ trợ bạn",
    "Chào bạn, hi vọng bạn đã có một buổi sáng đầy năng lượng, có điều gì đặc biệt bạn muốn thảo luận cùng tôi không?",
    "Chào bạn, bạn đang muốn tìm hiểu khóa học có thể giúp bạn khai phòng bản thân!? Hãy để tôi hỗ trợ bạn nhé!",
    "Buổi trưa sắp đến, bạn đã chọn món gì cho bữa trưa hôm nay?",
    "Chào buổi trưa thú vị! Bạn đã có kế hoạch gì cho phần còn lại của ngày hôm nay? ",
    "Buổi trưa thêm năng động với bữa ăn bổ dưỡng! Bạn ăn gì hôm nay?",
    "Chào buổi trưa! Bạn có một điều gì cần chia sẻ không?",
    "Chào buổi trưa đầy năng lượng! Bạn có kế hoạch nghỉ ngơi và thư giãn không?",
    "Buổi trưa vui vẻ! Bạn có kế hoạch gặp gỡ ai đó thú vị không?",
    "Buổi trưa năng động! Bạn đã thực hiện được những gì hôm nay chưa?"];

const group_12_14 = ["Xin chào, bạn đã ăn trưa chưa? Cơm gà là lựa chọn không tồi, nhưng tự nhiên tôi lại thèm Bún Đậu quá!",
    "Buổi trưa là khoảng thời gian tuyệt vời để nghỉ ngơi một chút, bạn thường làm gì để thư giãn.",
    "Bạn có thường xuyên ăn trưa cùng đồng nghiệp không? Tôi thấy đó là cách tốt nhất để gắn kết.",
    "Hy vọng bạn đã có một buổi sáng suôn sẻ! Tôi rất vui được hỗ trợ thông tin cho bạn trong chiều nay.",
    "Bạn đang tìm kiếm thông tin về khóa học phù hợp phải không? Tôi có thể giúp gì cho bạn!",
    "Bạn thích làm gì trong giờ nghỉ trưa? Ngủ một chút hay lang thang tìm kiếm thông tin mới.",
    "Bạn đang tìm kiếm thông tin trong thời gian nghỉ trưa? Tôi có thể hỗ trợ bạn ngay bây giờ ",
    "Hi, hiện đang là giờ trưa, bạn đang nghỉ hay còn đang làm việc? Tôi có thể hỗ trợ bạn điều gì không?",
    "Buổi trưa mát mẻ bạn nhé, bạn đã có kế hoạch gì cho khoảng thời gian này chưa?",
    "Hiện đang là giờ trưa rồi, cảm giác của bạn bây giờ như thế nào? Có điều gì bạn muốn trao đổi cùng tôi không?",
    "Chào bạn buổi trưa, tôi có thể hỗ trợ điều gì cho bạn?",
    "Buổi trưa an lành! Nếu có điều gì bạn muốn tìm hiểu, đừng ngần ngại nói cho tôi biết nhé.",
    "Buổi trưa tốt lành! Bạn đã nạp đủ năng lượng cho buổi chiều chưa?",
    "Buổi trưa tốt lành nhé! Bạn đã dành thời gian nghỉ ngơi chưa?",
    "Chào buổi trưa thảnh thơi! Bạn đã thư giãn chưa?"];

const group_14_18 = ["Bạn thích uống cafe hay trà vào buổi chiều? Tôi thường chọn trà trái cây để giữ tinh thần tỉnh táo.",
    "Bạn có kế hoạch gì cho tối nay chưa? Một lớp kỹ năng là một lựa chọn không tồi phải không?",
    "Tôi là Trợ lý AI thành viên mới của CSC, bạn đã thử tương tác với tôi chưa?",
    "Hy vọng bạn có một buổi chiều thuận lợi, làm một ngụm cafe để lên tinh thần nhé!",
    "Vừa có chương trình ưu đãi mới cho tháng này, bạn muốn biết không?",
    "Chúc bạn buổi chiều vui vẻ, tôi có thể hỗ trợ điều gì cho bạn?",
    "Hi bạn, đây là thời điểm tuyệt vời để tìm hiểu về khóa học nâng cấp bản thân, bạn muốn biết thêm thông tin không?",
    "Buổi chiều tốt lành! Nếu có điều gì cần bạn muốn tìm hiểu, đừng ngần ngại nói cho tôi biết nhé.",
    "Chào bạn, tôi ở đây đợi bạn từ chiều, tôi luôn sẵn sàng hỗ trợ bạn, hãy tương tác với tôi nhé",
    "Chào bạn, tôi sẵn sàng cung cấp thông tin và giải đáp mọi thắc mắc của bạn về khóa học. Có gì tôi có thể giúp đỡ không?",
    "Đây là thời gian tốt để thảo luận về khóa học, bạn có thể hỏi tôi bất cứ thông tin gì về khóa học nhé!",
    "Buổi chiều tốt lành! Bạn đang có kế hoạch gì cho mình sau một ngày làm việc thật năng suất chưa?"];

const group_18_24 = ["Chào bạn, chúc bạn một buổi tối vui vẻ. Hôm nay bạn đã có một ngày như thế nào?",
    "Hôm nay chắc hẳn bạn đã có một ngày dài. Tôi có thể hỗ trợ gì cho bạn, hãy cứ nói với tôi nhé?",
    "Bạn đã dùng bữa tối chưa? Tôi luôn tò mò về món ăn yêu thích của mọi người.",
    "Đôi khi buổi tối là thời gian tốt nhất để tìm hiểu về một kỹ năng mới, hãy để tôi hỗ trợ bạn nhé!",
    "Hôm nay là một ngày thật đặc biệt, bạn có muốn chia sẻ điều thú vị đó không?",
    "Chúc bạn buổi tối vui vẻ, tôi có thể hỗ trợ điều gì cho bạn?",
    "Buổi tối tốt lành, nếu bạn đang tìm hiểu về khóa học, đừng ngần ngại hỏi tôi bất cứ điều gì vì tôi luôn ở đây để hỗ trợ bạn",
    "Hình như bạn đang có thắc mắc cần giải đáp, hãy hỏi tôi nhé",
    "Xin chào buổi tối, rất vui được gặp bạn, nếu bạn cần hỗ trợ hãy gọi tên tôi nhé!",
    "Tôi biết kha khá thông tin khóa học của csc, bạn hãy hỏi tôi khi cần nhé",
    "Buổi tối tốt lành! Bạn đã dành thời gian để chăm sóc bản thân chưa? Đừng quên bật nhạc yêu thích và thư giãn một chút!",
    "Tôi vẫn ở đây, hãy hỏi tôi khi bạn cần nhé!"];



var displayed = 0;
var mytime;
/*
(function () {
    if (document.getElementById('assistantAI')) {
        const d = new Date();
        var hour = d.getHours();
                
        //if (hour < 12) {
        //    morning.forEach(function (item, index) {
        //        alls.push(item)
        //    });
        //}
        //else if (hour < 18) {
        //    afternoon.forEach(function (item, index) {
        //       alls.push(item)
        //    });
        //}
        //else {
        //    everning.forEach(function (item, index) {
        //        alls.push(item)
        //    });
        //}
        //shuffle(alls)
        //setTimeout(speech_text, 10000);
    	
        if (hour < 6) {
            mytime = setTimeout(speech_text(group_00_06), 30000);
        }
        else if (hour < 10) {
            mytime = setTimeout(speech_text(group_06_10), 30000);
        }
        else if (hour < 12) {
            mytime = setTimeout(speech_text(group_10_12), 30000);
        }
        else if (hour < 14) {
            mytime = setTimeout(speech_text(group_12_14), 30000);
        }
        else if (hour < 18) {
            mytime = setTimeout(speech_text(group_14_18), 30000);
        }   
        else {
            mytime = setTimeout(speech_text(group_18_24), 30000);
        }
    }
})();
*/
$(document).ready(function () {
    setTimeout(InitialMessage, 2000);
});

function InitialMessage() {
    if (document.getElementById('assistantAI')) {
        const d = new Date();
        var hour = d.getHours();

        if (hour < 6) {
            mytime = setTimeout(speech_text, 30000, group_00_06);
        }
        else if (hour < 10) {
            mytime = setTimeout(speech_text, 30000, group_06_10);
        }
        else if (hour < 12) {
            mytime = setTimeout(speech_text, 30000, group_10_12);
        }
        else if (hour < 14) {
            mytime = setTimeout(speech_text, 30000, group_12_14);
        }
        else if (hour < 18) {
            mytime = setTimeout(speech_text, 30000, group_14_18);
        }
        else {
            mytime = setTimeout(speech_text, 30000, group_18_24);
        }
    }
}

function shuffle(array) {
    let currentIndex = array.length, randomIndex;

    // While there remain elements to shuffle.
    while (currentIndex > 0) {

        // Pick a remaining element.
        randomIndex = Math.floor(Math.random() * currentIndex);
        currentIndex--;

        // And swap it with the current element.
        [array[currentIndex], array[randomIndex]] = [
            array[randomIndex], array[currentIndex]];
    }

    return array;
}

async function speech_text(arr) {
    if (document.getElementById("assistants-container").style.display != "none") {
        displayed = 1;
        clearTimeout(mytime);
    }
    if (displayed == 0) {
        document.getElementById('assistant-speechs').classList.add("speech");
        //await new Promise(r => setTimeout(r, 500));
        //await sleep(500);
        //var item = arr[(Math.floor(Math.random() * arr.length))]
        //var output = document.getElementById('speachContent');
        //await writeText(item, output);
        setTimeout(speech1, 500, arr);

        //await new Promise(r => setTimeout(r, 5000));
        //await sleep(5000);
        //document.getElementById('speachContent').innerHTML = "";
        //document.getElementById('asisstant-speechs').classList.remove("speech");

        //await new Promise(r => setTimeout(r, 10000));
        //await sleep(10000);
        //mytime = setTimeout(speech_text, 20000, arr);
    }
}

async function speech1(arr) {
    var item = arr[(Math.floor(Math.random() * arr.length))]
    var output = document.getElementById('speachContent');
    await writeText(item, output);
    mytime = setTimeout(speech2, 5000, arr);
}

function speech2(arr) {
    document.getElementById('speachContent').innerHTML = "";
    document.getElementById('assistant-speechs').classList.remove("speech");
    mytime = setTimeout(speech3, 10000, arr);
}

function speech3(arr) {
    mytime = setTimeout(speech_text, 20000, arr);
}

async function sleep(ms) {
    return new Promise(async resolve => setTimeout(resolve, ms));
}

async function writeText(text, output) {
    var j = 0;
    var totalText = "";
    while (j < text.length) {
        var n = Math.floor(Math.random() * 3) + 1;
        if (j + n > text.length) n = text.length - j;
        totalText += text.substr(j, n);
        //await new Promise(async r => setTimeout(r, 40));
        await sleep(40);
        output.innerHTML = totalText;
        j += n;
    }
}
